#!/usr/bin/env bash

# All packages have moved to nix/home.nix (managed by home-manager).
# This file only contains installers for tools not available in nixpkgs.

# deno
if ! command -v deno >/dev/null 2>&1; then
    curl -fsSL https://deno.land/x/install/install.sh | sh
fi

# Rust
if ! command -v cargo >/dev/null 2>&1; then
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
fi

# tfswitch (not in nixpkgs)
if ! command -v tfswitch >/dev/null 2>&1; then
    curl -L https://raw.githubusercontent.com/warrensbox/terraform-switcher/master/install.sh | bash
fi

if [ ! -f "$NVM_DIR/nvm.sh" ]; then
    echo "Installing nvm"
    PROFILE=/dev/null bash -c 'curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash'
    zsh -lic "nvm install 20" # node 20
    zsh -lic "nvm use 20"
    zsh -lic "nvm alias default 20"
fi